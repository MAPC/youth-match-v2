<section class="route users">

  <h2>MANAGE USERS</h2>

  {{loading-dots model=filteredModel text="LOADING USERS"}}

  {{#if (gt sortedModel.length perPage)}}
    <div class="pagination">
      <button class="previous to-begin {{unless min 'disabled'}}" onclick={{if min (action 'first')}}></button>
      <button class="previous {{unless min 'disabled'}}" onclick={{if min (action 'previous')}}></button>
      <span>{{page}}</span>
      <button class="next {{if (gte max sortedModel.length) 'disabled'}}" onclick={{if (lt max sortedModel.length) (action 'next')}}></button>
      <button class="next to-end {{if (gte max sortedModel.length) 'disabled'}}" onclick={{if (lt max sortedModel.length) (action 'last')}}></button>
    </div>
  {{/if}}


  <div class="table users-table">

    <div class="th">
      <div class="td">Email</div>
      <div class="td">Account Type</div>
      <div class="td"></div>
      <div class="td"></div>
    </div>

    <div class="rows">
      {{#each filteredModel as |user|}}
        <div class="tr">
          <div class="td">{{user.email}}</div>
          <div class="td">
            <select onchange={{action 'setUpdateable' value="target"}} data-userid={{user.id}}>
              <option value='youth' selected={{if (eq user.account_type 'youth') selected}}>Youth</option>
              <option value='partner' selected={{if (eq user.account_type 'partner') selected}}>Partner</option>
              <option value='staff' selected={{if (eq user.account_type 'staff') selected}}>Staff</option>
            </select>
          </div>
          <div class="td">
            <button class="small {{unless user.updated 'disabled'}}" onclick={{action 'updateUser' user}}>Update Account</button>
          </div>
          <div class="td">
            <button class="destructive small" onclick={{action 'deleteUser' user}}>Delete</button>
          </div>
        </div>
      {{/each}}
    </div>
  </div>


</section>

